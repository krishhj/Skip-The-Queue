{% extends "base.html" %}

{% block title %}Home - SkipTheQueue{% endblock %}

{% block content %}
<div class="animate-fadeIn">
    <div class="text-center mb-5">
        <h1 class="display-4">Welcome, {{ current_user.full_name.split()[0] }}! üëã</h1>
        <p class="lead text-muted">Skip the queue, savor the moment</p>
    </div>

    

    <h3 class="mb-4 text-center">Choose a Category</h3>

 <div class="row g-4">
    {% for category in categories %}
    <div class="col-md-6 col-lg-3">
        <a href="{{ url_for('category_menu', category_id=category.id) }}" class="text-decoration-none">
            <div class="card h-100 shadow hover-card animate-fadeInUp" style="animation-delay: {{ loop.index0 * 0.1 }}s">
                <div class="card-body text-center p-4">
                    <div class="category-icon mb-3"
                        {% if 'Chai' in category.name %}
                            style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);"
                        {% elif 'Snack' in category.name %}
                            style="background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);"
                        {% elif 'Main' in category.name %}
                            style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"
                        {% else %}
                            style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);"
                        {% endif %}
                    >
                        {% set icon_size = "40px" %} {% if 'Chai' in category.name %}
                            <img src="{{ url_for('static', filename='icons/chai.svg') }}" alt="Chai Icon" width="{{ icon_size }}" height="{{ icon_size }}">
                        {% elif 'Snack' in category.name %}
                            <img src="{{ url_for('static', filename='icons/snack.svg') }}" alt="Snack Icon" width="{{ icon_size }}" height="{{ icon_size }}">
                        {% elif 'Main' in category.name %}
                            <img src="{{ url_for('static', filename='icons/main-course.svg') }}" alt="Main Course Icon" width="{{ icon_size }}" height="{{ icon_size }}">
                        {% else %}
                            <img src="{{ url_for('static', filename='icons/drink.svg') }}" alt="Drink Icon" width="{{ icon_size }}" height="{{ icon_size }}">
                        {% endif %}
                        </div>
                    <h4 class="card-title">{{ category.name }}</h4>
                    <p class="card-text text-muted">{{ category.description }}</p>
                    <button class="btn btn-primary btn-sm mt-2">
                        Browse Menu <i class="bi bi-arrow-right"></i>
                    </button>
                </div>
            </div>
        </a>
    </div>
    {% endfor %}
</div>
{% if student_orders > 0 %}
    <div class="row mt-5">
        <div class="col-12">
            <div class="sustainability-card">
                <div class="row align-items-center">
                    <div class="col-md-2 text-center">
                        <div class="sustainability-icon mx-auto">
                         <img src="{{ url_for('static', filename='icons/leaf.svg') }}" alt="leaf Icon" width="{{ icon_size }}" height="{{ icon_size }}">
                        </div>
                    </div>
                    <div class="col-md-10">
                        <h4 class="mb-2" style="color: #065f46;">üåç Your Sustainability Impact</h4>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="impact-number">{{ student_orders }}</div>
                                <div class="impact-label">pre-orders placed</div>
                            </div>
                            <div class="col-md-6">
                                <div class="impact-number">{{ waste_saved }}</div>
                                <div class="impact-label">kg waste prevented</div>
                            </div>
                        </div>
                        <p class="mt-3 mb-0 small" style="color: #047857;">
                            <i class="bi bi-check-circle"></i> You're helping reduce food waste by ordering ahead!
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <div class="row mt-5">
        <div class="col-12">
            <div class="card glass-card">
                <div class="card-body">
                    <h5><i class="bi bi-info-circle text-primary"></i> How it works</h5>
                    <div class="row mt-3">
                        <div class="col-md-3 text-center mb-3">
                            <div class="stats-icon mx-auto" style="background: rgba(99, 102, 241, 0.1);">
                                <i class="bi bi-search text-primary"></i>
                            </div>
                            <h6 class="mt-2">1. Browse</h6>
                            <small class="text-muted">Explore delicious menu items</small>
                        </div>
                        <div class="col-md-3 text-center mb-3">
                            <div class="stats-icon mx-auto" style="background: rgba(139, 92, 246, 0.1);">
                                <i class="bi bi-cart-plus" style="color: var(--secondary);"></i>
                            </div>
                            <h6 class="mt-2">2. Order</h6>
                            <small class="text-muted">Add to cart & select pickup time</small>
                        </div>
                        <div class="col-md-3 text-center mb-3">
                            <div class="stats-icon mx-auto" style="background: rgba(16, 185, 129, 0.1);">
                                <i class="bi bi-credit-card text-success"></i>
                            </div>
                            <h6 class="mt-2">3. Pay</h6>
                            <small class="text-muted">Online or Cash on Delivery</small>
                        </div>
                        <div class="col-md-3 text-center mb-3">
                            <div class="stats-icon mx-auto" style="background: rgba(245, 158, 11, 0.1);">
                                <i class="bi bi-qr-code text-warning"></i>
                            </div>
                            <h6 class="mt-2">4. Pickup</h6>
                            <small class="text-muted">Show QR - No waiting!</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}